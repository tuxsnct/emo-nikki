mutation AddMessage($text: String!, $date: date = "now", $uid: String!, $negative: Int!, $positive: Int!) {
  insert_messages_one(object: {text: $text, uid: $uid}) {
    created_at
    date
    id
    text
    uid
  }
  insert_sentiments_one(object: {date: $date, uid: $uid}, on_conflict: {constraint: sentiments_date_uid_key}) {
    date
    negative
    positive
    uid
  }
  update_sentiments(where: {date: {_eq: $date}, uid: {_eq: $uid}}, _inc: {negative: $negative, positive: $positive}) {
    affected_rows
    returning {
      date
      id
      negative
      positive
      uid
    }
  }
}
